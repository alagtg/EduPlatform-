{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet ProfDashboardComponent = class ProfDashboardComponent {\n  constructor(fileService, auth) {\n    this.fileService = fileService;\n    this.auth = auth;\n    this.files = [];\n    this.title = '';\n    this.type = 0;\n    this.selectedFile = null;\n    this.slug = '';\n    this.uploading = false;\n    this.deletingId = null;\n  }\n  getTypeLabel(type) {\n    switch (type) {\n      case 0:\n        return 'Cours';\n      case 1:\n        return 'TD';\n      case 2:\n        return 'TP';\n      case 3:\n        return 'Autre';\n      default:\n        return 'Inconnu';\n    }\n  }\n  ngOnInit() {\n    this.slug = this.auth.getProfSlugFromToken();\n    this.loadFiles();\n  }\n  onFileSelected(e) {\n    this.selectedFile = e.target.files[0];\n  }\n  onUpload() {\n    if (!this.selectedFile || !this.title) return;\n    this.uploading = true;\n    this.fileService.uploadFile(this.title, this.type, this.selectedFile).subscribe({\n      next: () => {\n        this.title = '';\n        this.type = 0;\n        this.selectedFile = null;\n        this.loadFiles();\n      },\n      complete: () => this.uploading = false\n    });\n  }\n  loadFiles() {\n    if (!this.slug) return;\n    this.fileService.getFilesByProf(this.slug).subscribe(res => this.files = res);\n  }\n  delete(id) {\n    this.deletingId = id;\n    this.fileService.deleteFile(id).subscribe({\n      next: () => this.loadFiles(),\n      complete: () => this.deletingId = null\n    });\n  }\n};\nProfDashboardComponent = __decorate([Component({\n  selector: 'app-prof-dashboard',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './prof-dashboard.component.html',\n  styleUrls: ['./prof-dashboard.component.scss']\n})], ProfDashboardComponent);\nexport { ProfDashboardComponent };","map":{"version":3,"names":["Component","CommonModule","FormsModule","ProfDashboardComponent","constructor","fileService","auth","files","title","type","selectedFile","slug","uploading","deletingId","getTypeLabel","ngOnInit","getProfSlugFromToken","loadFiles","onFileSelected","e","target","onUpload","uploadFile","subscribe","next","complete","getFilesByProf","res","delete","id","deleteFile","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["C:\\Users\\PC\\Desktop\\projetangular.nethoudaetraja\\EduPlatformFront\\src\\app\\pages\\prof-dashboard\\prof-dashboard.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { FileService } from '../../core/services/file.service';\nimport { AuthService } from '../../core/services/auth.service';\n\n@Component({\n  selector: 'app-prof-dashboard',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './prof-dashboard.component.html',\n  styleUrls: ['./prof-dashboard.component.scss']\n})\nexport class ProfDashboardComponent implements OnInit {\n  files: any[] = [];\n  title = '';\n  type = 0;\n  selectedFile: File | null = null;\n  slug = '';\n\n  uploading = false;\n  deletingId: number | null = null;\n\n  constructor(private fileService: FileService, private auth: AuthService) {}\ngetTypeLabel(type: number): string {\n  switch (type) {\n    case 0: return 'Cours';\n    case 1: return 'TD';\n    case 2: return 'TP';\n    case 3: return 'Autre';\n    default: return 'Inconnu';\n  }\n}\n\n  ngOnInit() {\n    this.slug = this.auth.getProfSlugFromToken();\n    this.loadFiles();\n  }\n\n  onFileSelected(e: any) { this.selectedFile = e.target.files[0]; }\n\n  onUpload() {\n    if (!this.selectedFile || !this.title) return;\n    this.uploading = true;\n    this.fileService.uploadFile(this.title, this.type, this.selectedFile).subscribe({\n      next: () => { this.title=''; this.type=0; this.selectedFile=null; this.loadFiles(); },\n      complete: () => this.uploading = false\n    });\n  }\n\n  loadFiles() {\n    if (!this.slug) return;\n    this.fileService.getFilesByProf(this.slug).subscribe(res => this.files = res);\n  }\n\n  delete(id: number) {\n    this.deletingId = id;\n    this.fileService.deleteFile(id).subscribe({\n      next: () => this.loadFiles(),\n      complete: () => this.deletingId = null\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;AAWrC,IAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAUjCC,YAAoBC,WAAwB,EAAUC,IAAiB;IAAnD,KAAAD,WAAW,GAAXA,WAAW;IAAuB,KAAAC,IAAI,GAAJA,IAAI;IAT1D,KAAAC,KAAK,GAAU,EAAE;IACjB,KAAAC,KAAK,GAAG,EAAE;IACV,KAAAC,IAAI,GAAG,CAAC;IACR,KAAAC,YAAY,GAAgB,IAAI;IAChC,KAAAC,IAAI,GAAG,EAAE;IAET,KAAAC,SAAS,GAAG,KAAK;IACjB,KAAAC,UAAU,GAAkB,IAAI;EAE0C;EAC5EC,YAAYA,CAACL,IAAY;IACvB,QAAQA,IAAI;MACV,KAAK,CAAC;QAAE,OAAO,OAAO;MACtB,KAAK,CAAC;QAAE,OAAO,IAAI;MACnB,KAAK,CAAC;QAAE,OAAO,IAAI;MACnB,KAAK,CAAC;QAAE,OAAO,OAAO;MACtB;QAAS,OAAO,SAAS;IAC3B;EACF;EAEEM,QAAQA,CAAA;IACN,IAAI,CAACJ,IAAI,GAAG,IAAI,CAACL,IAAI,CAACU,oBAAoB,EAAE;IAC5C,IAAI,CAACC,SAAS,EAAE;EAClB;EAEAC,cAAcA,CAACC,CAAM;IAAI,IAAI,CAACT,YAAY,GAAGS,CAAC,CAACC,MAAM,CAACb,KAAK,CAAC,CAAC,CAAC;EAAE;EAEhEc,QAAQA,CAAA;IACN,IAAI,CAAC,IAAI,CAACX,YAAY,IAAI,CAAC,IAAI,CAACF,KAAK,EAAE;IACvC,IAAI,CAACI,SAAS,GAAG,IAAI;IACrB,IAAI,CAACP,WAAW,CAACiB,UAAU,CAAC,IAAI,CAACd,KAAK,EAAE,IAAI,CAACC,IAAI,EAAE,IAAI,CAACC,YAAY,CAAC,CAACa,SAAS,CAAC;MAC9EC,IAAI,EAAEA,CAAA,KAAK;QAAG,IAAI,CAAChB,KAAK,GAAC,EAAE;QAAE,IAAI,CAACC,IAAI,GAAC,CAAC;QAAE,IAAI,CAACC,YAAY,GAAC,IAAI;QAAE,IAAI,CAACO,SAAS,EAAE;MAAE,CAAC;MACrFQ,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACb,SAAS,GAAG;KAClC,CAAC;EACJ;EAEAK,SAASA,CAAA;IACP,IAAI,CAAC,IAAI,CAACN,IAAI,EAAE;IAChB,IAAI,CAACN,WAAW,CAACqB,cAAc,CAAC,IAAI,CAACf,IAAI,CAAC,CAACY,SAAS,CAACI,GAAG,IAAI,IAAI,CAACpB,KAAK,GAAGoB,GAAG,CAAC;EAC/E;EAEAC,MAAMA,CAACC,EAAU;IACf,IAAI,CAAChB,UAAU,GAAGgB,EAAE;IACpB,IAAI,CAACxB,WAAW,CAACyB,UAAU,CAACD,EAAE,CAAC,CAACN,SAAS,CAAC;MACxCC,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACP,SAAS,EAAE;MAC5BQ,QAAQ,EAAEA,CAAA,KAAM,IAAI,CAACZ,UAAU,GAAG;KACnC,CAAC;EACJ;CACD;AAjDYV,sBAAsB,GAAA4B,UAAA,EAPlC/B,SAAS,CAAC;EACTgC,QAAQ,EAAE,oBAAoB;EAC9BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACjC,YAAY,EAAEC,WAAW,CAAC;EACpCiC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,iCAAiC;CAC9C,CAAC,C,EACWjC,sBAAsB,CAiDlC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}